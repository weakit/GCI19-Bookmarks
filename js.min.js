var bookmarks={Google:"https://google.com",Wikipedia:"https://www.wikipedia.org/",Youtube:"https://www.youtube.com/"},nameAlertQueued=!1,urlAlertQueued=!1,emptyNameAlertQueued=!1,emptyUrlAlertQueued=!1;function validName(e){return!(e in bookmarks)}function validURL(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function clearStorage(){localStorage.removeItem("populated"),localStorage.removeItem("bookmarks"),console.log("Deleted Storage. Please Refresh Page.")}function populateStorage(){localStorage.setItem("populated","true"),console.log("Populated Storage."),writeStorage()}function readStorage(){bookmarks=JSON.parse(localStorage.getItem("bookmarks")),console.log("Read Storage.")}function writeStorage(){localStorage.setItem("bookmarks",JSON.stringify(bookmarks)),console.log("Written Storage.")}function addBookmark(e,t){if(!validURL(t))throw"Invalid URL.";bookmarks[e]=t,writeStorage()}function removeBookmark(e){delete bookmarks[e],writeStorage()}function getBookmarks(){return bookmarks}function craftBookmark(e,t){return`<a onclick="open(this);" class="list-group-item list-group-item-action clearfix"><div class="link text-muted"><span class="h5 align-middle text-body">${e}<br/></span><span>${t}</span> </div><span class="buttons align-middle float-right"> <button onclick="remove(this.parentNode.parentNode);" class="btn btn-sm btn-danger">Delete</button></span></a>`}function updatePage(){var e="";for(var t in bookmarks)e+=craftBookmark(t,bookmarks[t]);0==e.length&&(e='<p class="pt-3 lead text-light">No Bookmarks.</p>'),$("#bookmarks").html(e),console.log("Updated Page.")}function identify(e){return $(e).children().children().html().slice(0,-4)}function open(e){var t=identify(e);window.open(bookmarks[t]),console.log("Opened Link.")}function remove(e){var t=identify(e);e.parentNode.removeChild(e),removeBookmark(t)}function alertEmptyName(){Boolean($("#emptyName").length)?emptyNameAlertQueued=!0:$("#alerts").html($("#alerts").html()+'<div id="emptyName" class="alert alert-danger" role="alert">There\'s no name specified for the new bookmark. <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> </div>'),setTimeout(function(){emptyNameAlertQueued?emptyNameAlertQueued=!1:$("#emptyName").alert("close")},3e3)}function alertEmptyURL(){Boolean($("#emptyURL").length)?emptyUrlAlertQueued=!0:$("#alerts").html($("#alerts").html()+'<div id="emptyURL" class="alert alert-danger" role="alert">There\'s no URL specified for the new bookmark. <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> </div>'),setTimeout(function(){emptyUrlAlertQueued?emptyUrlAlertQueued=!1:$("#emptyURL").alert("close")},3e3)}function alertInvalidName(){Boolean($("#invalidName").length)?nameAlertQueued=!0:$("#alerts").html($("#alerts").html()+'<div id="invalidName" class="alert alert-warning" role="alert">There\'s already a bookmark with that name. <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> </div>'),setTimeout(function(){nameAlertQueued?nameAlertQueued=!1:$("#invalidName").alert("close")},3e3)}function alertInvalidURL(){Boolean($("#invalidURL").length)?urlAlertQueued=!0:$("#alerts").html($("#alerts").html()+'<div id="invalidURL" class="alert alert-danger" role="alert">That\'s not a valid URL. <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">&times;</span> </button> </div>'),setTimeout(function(){urlAlertQueued?urlAlertQueued=!1:$("#invalidURL").alert("close")},3e3)}function deleteAlerts(){$("#emptyName").alert("close"),$("#emptyURL").alert("close"),$("#invalidName").alert("close"),$("#invalidURL").alert("close")}function emptyFields(){$("#name").val(""),$("#url").val("")}function create(){var e=$("#name").val(),t=$("#url").val();0==e.length&&(e=t),0==t.length&&alertEmptyURL(),0!=e.length&&0!=t.length&&(validName(e)||alertInvalidName(),validURL(t)||alertInvalidURL(),validName(e)&&validURL(t)&&(addBookmark(e,t),updatePage(),deleteAlerts(),emptyFields()))}localStorage.getItem("populated")?readStorage():populateStorage(),updatePage();
